# Apilot 插件

## 简介

Apilot 是一个基于 XXXBOT 的实用 API 接口调用插件，提供多种实用功能，如天气查询、星座运势、新闻资讯等。

原DOW插件，由于不可抗力迁移至XXXBOT平台，保持原有功能。

## 功能特点

* 一言（Hitokoto）- 随机返回一句名言
* 星座运势 - 查询星座每日运势
* 天气查询 - 查询城市天气信息（支持今天、明天、后天、七天）
* 新闻资讯 - 获取网易新闻头条
* 毒鸡汤 - 获取心灵毒鸡汤
* 舔狗日记 - 获取舔狗日记
* 历史上的今天 - 查询历史上今天发生的事件
* 早报 - 获取每日早报（支持图片版和文字版）
* 摸鱼日历 - 获取摸鱼人日历
* 摸鱼视频 - 获取摸鱼视频
* 明星八卦 - 获取明星八卦
* 热榜查询 - 查询各大平台热榜（微博、知乎、哔哩哔哩等）

## 安装与配置

1. 将插件文件夹放入 `plugins` 目录
2. 编辑 `config.toml` 文件，配置以下参数：
   * `enable` - 是否启用插件
   * `alapi_token` - ALAPI 的 token，用于访问 API 服务
   * `morning_news_text_enabled` - 是否启用早报文字版

### 触发词配置

在 `config.toml` 文件的 `[triggers]` 部分，可以自定义各功能的触发词：

```toml
[triggers]
# 天气查询触发正则表达式
weather_pattern = '^(?:(.{2,7}?)(?:市|县|区|镇)?|(\d{7,9}))(:?今天|明天|后天|7天|七天)?(?:的)?天气$'
# 星座运势触发正则表达式
horoscope_pattern = '^([\u4e00-\u9fa5]{2}座)$'
# 新闻查询触发正则表达式
news_pattern = '^(.*?)新闻$'
# 历史上的今天触发正则表达式
history_pattern = '^历史上的今天(\d+)月(\d+)日'
# 热榜查询触发正则表达式
hot_trend_pattern = '(.{1,6})热榜$'
# 一言触发词
hitokoto_trigger = '一言'
# 毒鸡汤触发词
dujitang_trigger = '毒鸡汤'
# 舔狗日记触发词
dog_diary_trigger = '舔狗'
# 早报触发词
morning_news_trigger = '早报'
# 摸鱼触发词
moyu_trigger = '摸鱼'
# 摸鱼视频触发词
moyu_video_trigger = '摸鱼视频'
# 八卦触发词
bagua_trigger = '八卦'

[apis]
# 八卦API地址
bagua_api_url = "https://dayu.qqsuu.cn/mingxingbagua/apis.php"
# 摸鱼视频API地址
moyu_video_api_url = "https://api.vvhan.com/api/360wallpaper"
```

## Token 申请

* `alapi_token` 申请请访问 [ALAPI](https://admin.alapi.cn/account/center)

## 使用方法

* 发送 `一言` 获取随机名言
* 发送星座名称（如 `白羊座`）获取星座运势
* 发送 `城市名+天气`（如 `北京天气`）获取天气信息
* 发送 `新闻` 或 `XX新闻`（如 `体育新闻`）获取新闻资讯
* 发送 `毒鸡汤` 获取心灵毒鸡汤
* 发送 `舔狗` 获取舔狗日记
* 发送 `历史上的今天` 获取历史上的今天发生的事件
* 发送 `历史上的今天X月X日` 获取特定日期的历史事件
* 发送 `早报` 获取每日早报
* 发送 `摸鱼` 获取摸鱼人日历
* 发送 `摸鱼视频` 获取摸鱼视频
* 发送 `八卦` 获取明星八卦
* 发送 `XX热榜`（如 `微博热榜`、`知乎热榜`）获取相应平台的热榜

## 示例

* 发送 `一言` 获取随机名言
* 发送 `白羊座` 获取白羊座今日运势
* 发送 `北京天气` 获取北京今日天气
* 发送 `北京明天天气` 获取北京明天天气
* 发送 `北京七天天气` 获取北京七天天气预报
* 发送 `体育新闻` 获取体育新闻头条
* 发送 `毒鸡汤` 获取心灵毒鸡汤
* 发送 `舔狗` 获取舔狗日记
* 发送 `历史上的今天` 获取今天的历史事件
* 发送 `早报` 获取每日早报
* 发送 `摸鱼` 获取摸鱼人日历

## 注意事项

* 部分功能需要配置 ALAPI 的 token 才能使用
* 天气查询支持 3400+ 城市，输入不正确或查询失败会返回提示信息
* 新闻查询支持 30+ 种新闻类别，包括综合、娱乐、体育、财经、科技等
* 早报功能支持图片版和文字版，可在配置文件中设置
* 摸鱼日历使用韩小韩API接口站，如果无法访问可能是因为该站点屏蔽了海外IP

## 功能依赖

* 天气查询、星座运势、新闻资讯、一言、毒鸡汤、舔狗日记、历史上的今天、早报：需要 ALAPI token
* 摸鱼日历：使用韩小韩API接口站，免费无需token

## 版本历史

* v1.5.0 - 添加触发词配置，完善所有功能
* v1.4.0 - 适配 XXXBOT 框架
* v1.3.0 - 添加更多 API 功能
* v1.2.0 - 优化错误处理
* v1.1.0 - 添加新闻查询功能
* v1.0.0 - 初始版本
